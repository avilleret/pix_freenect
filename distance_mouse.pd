#N canvas 0 22 394 273 10;
#X obj 152 146 gemwin;
#N canvas 12 224 450 300 mouse 0;
#X floatatom 142 152 5 0 0 0 - - -;
#X floatatom 180 154 5 0 0 0 - - -;
#X obj 159 101 gemmouse 1 1;
#X obj 141 215 s /distance/mousecoord;
#X obj 141 181 pack f f;
#X connect 2 0 0 0;
#X connect 2 0 4 0;
#X connect 2 1 1 0;
#X connect 2 1 4 1;
#X connect 4 0 3 0;
#X restore 47 74 pd mouse;
#X msg 170 120 destroy;
#N canvas 82 260 450 300 text 0;
#X obj 187 -6 r /distance/meters;
#X obj 107 206 text3d;
#X obj 107 160 translateXYZ 0 0 0;
#X obj 51 49 gemhead 10;
#X obj 187 18 list prepend text;
#X obj 187 39 list append m;
#X obj 187 62 list trim;
#X floatatom 199 182 5 0 0 0 - - -;
#X msg 231 158 7;
#X obj 231 101 loadbang;
#N canvas 0 22 450 300 position 0;
#X obj 142 53 r /distance/mousecoord;
#X obj 142 75 unpack 0 0;
#X obj 199 102 - 0.5;
#X obj 199 184 outlet;
#X obj 142 103 - 0.5;
#X obj 142 185 outlet;
#X obj 142 129 * 9;
#X obj 199 157 + 0.2;
#X obj 199 128 * -7;
#X connect 0 0 1 0;
#X connect 1 0 4 0;
#X connect 1 1 2 0;
#X connect 2 0 8 0;
#X connect 4 0 6 0;
#X connect 6 0 5 0;
#X connect 7 0 3 0;
#X connect 8 0 7 0;
#X restore 142 122 pd position;
#X obj 51 76 color 1 1 1;
#X obj 311 160 translateXYZ 0 0 0;
#N canvas 0 22 450 300 position 0;
#X obj 142 53 r /distance/mousecoord;
#X obj 142 75 unpack 0 0;
#X obj 199 102 - 0.5;
#X obj 199 184 outlet;
#X obj 142 103 - 0.5;
#X obj 142 185 outlet;
#X obj 142 129 * 9;
#X obj 199 157 + 0.2;
#X obj 199 128 * -7;
#X connect 0 0 1 0;
#X connect 1 0 4 0;
#X connect 1 1 2 0;
#X connect 2 0 8 0;
#X connect 4 0 6 0;
#X connect 6 0 5 0;
#X connect 7 0 3 0;
#X connect 8 0 7 0;
#X restore 346 122 pd position;
#X obj 311 86 color 0 0 0 0.2;
#X obj 311 61 alpha;
#X obj 311 34 gemhead 9;
#X obj 311 202 rectangle 2 0.3;
#X connect 0 0 4 0;
#X connect 2 0 1 0;
#X connect 3 0 11 0;
#X connect 4 0 5 0;
#X connect 5 0 6 0;
#X connect 6 0 1 0;
#X connect 7 0 1 1;
#X connect 8 0 1 1;
#X connect 9 0 8 0;
#X connect 10 0 2 1;
#X connect 10 1 2 2;
#X connect 11 0 2 0;
#X connect 12 0 17 0;
#X connect 13 0 12 1;
#X connect 13 1 12 2;
#X connect 14 0 12 0;
#X connect 15 0 14 0;
#X connect 16 0 15 0;
#X restore 52 97 pd text;
#X msg 152 98 FSAA 4 \, dimen 640 480 \, create \, 1;
#N canvas 41 464 635 336 kinect 1;
#N canvas 62 147 725 506 distance_measurement 1;
#X obj 112 42 inlet;
#X obj 97 89 pix_data;
#X obj 119 140 unpack 0 0 0;
#X floatatom 121 162 5 0 0 0 - - -;
#X floatatom 160 162 5 0 0 0 - - -;
#X floatatom 200 162 5 0 0 0 - - -;
#X obj 153 201 * 256;
#X obj 83 201 * 65536;
#X obj 83 231 +;
#X text 112 231 rawdisparity 16 bit;
#X obj 397 263 expr 100/(-0.0030711016*$f1+3.3309495161);
#X obj 22 47 metro 100;
#X obj 22 24 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 1 1
;
#X obj 397 291 / 100;
#X obj 83 350 nbx 5 60 -1e+37 1e+37 0 0 empty empty m 300 22 0 60 -262144
-1 -1 0.30546 256;
#X text 229 101 output pixel rgb value;
#X text 230 9 for distance measurement use raw depth output!;
#X text 201 139 r g b;
#X text 192 200 second and first 8 bits;
#X text 396 26 -> see properties;
#X text 451 296 (mailinglist libfreenect);
#X text 165 326 display distance in meters;
#X text 240 52 x \, y pixel position in range 0 - 1;
#X text 450 280 distance in cm - empiric formula;
#X text 339 64 (from depth image);
#X text 40 23 ON/OFF;
#X obj 23 421 s /distance/meters;
#X obj 22 3 r /distance/poll;
#X obj 160 3 r /distance/mousecoord;
#X obj 160 26 unpack 0 0;
#X obj 217 46 - 1;
#X obj 217 70 * -1;
#X obj 83 262 expr 0.1236*tan($f1/2842.5+1.1863);
#X floatatom 397 316 5 0 0 0 - - -;
#X text 396 246 not so accurate formula;
#X text 159 279 more accurate formula;
#X floatatom 385 167 8 0 0 0 - - -;
#X obj 385 186 / 1000;
#X floatatom 385 208 5 0 0 0 - - -;
#X connect 0 0 1 1;
#X connect 1 1 2 0;
#X connect 2 0 3 0;
#X connect 2 0 7 0;
#X connect 2 1 4 0;
#X connect 2 1 6 0;
#X connect 2 2 5 0;
#X connect 6 0 8 1;
#X connect 7 0 8 0;
#X connect 8 0 10 0;
#X connect 8 0 32 0;
#X connect 8 0 36 0;
#X connect 10 0 13 0;
#X connect 11 0 1 0;
#X connect 12 0 11 0;
#X connect 13 0 33 0;
#X connect 27 0 12 0;
#X connect 28 0 29 0;
#X connect 29 0 1 2;
#X connect 29 1 30 0;
#X connect 30 0 31 0;
#X connect 31 0 1 3;
#X connect 32 0 14 0;
#X connect 36 0 37 0;
#X connect 37 0 38 0;
#X connect 38 0 26 0;
#X restore 240 251 pd distance_measurement;
#X obj 240 174 pix_texture;
#X obj 240 226 rectangle 6.4 4.8;
#X obj 289 201 * 6.4;
#X obj 339 202 * 4.8;
#X floatatom 339 181 5 0 0 0 - - -;
#X msg 339 159 0.833;
#X obj 339 140 loadbang;
#X msg 62 11 angle \$1;
#X floatatom 62 -13 5 0 0 0 - - -;
#X msg 373 68 led 2;
#X msg 142 -6 depth_output 2;
#X obj 11 151 pix_texture;
#X obj 11 236 rectangle 6.4 4.8;
#X obj 60 211 * 6.4;
#X obj 110 212 * 4.8;
#X floatatom 110 191 5 0 0 0 - - -;
#X msg 110 169 0.833;
#X obj 110 150 loadbang;
#X obj 240 152 pix_alpha;
#X floatatom 255 125 5 0 0 0 - - -;
#X obj 364 19 alpha;
#X msg 246 15 rgb \$1;
#X msg 303 17 depth \$1;
#X obj 246 -6 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 0
1;
#X obj 303 -6 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 0
1;
#X obj 179 91 alpha;
#X obj 179 67 gemhead 3;
#X obj -10 72 gemhead 1;
#X msg 255 104 0.6;
#X msg 297 106 1;
#X msg 136 29 depth_output 0;
#X obj 441 49 route 1;
#X obj 62 121 pix_freenect 0 1 1 0;
#X obj 443 18 route gem_state;
#X obj 441 79 delay 500;
#X connect 1 0 2 0;
#X connect 2 0 0 0;
#X connect 3 0 2 1;
#X connect 4 0 2 2;
#X connect 5 0 4 0;
#X connect 5 0 3 0;
#X connect 6 0 5 0;
#X connect 7 0 6 0;
#X connect 7 0 29 0;
#X connect 8 0 33 0;
#X connect 9 0 8 0;
#X connect 10 0 33 0;
#X connect 11 0 33 0;
#X connect 12 0 13 0;
#X connect 14 0 13 1;
#X connect 15 0 13 2;
#X connect 16 0 15 0;
#X connect 16 0 14 0;
#X connect 17 0 16 0;
#X connect 18 0 17 0;
#X connect 19 0 1 0;
#X connect 20 0 19 1;
#X connect 20 0 19 2;
#X connect 22 0 33 0;
#X connect 23 0 33 0;
#X connect 24 0 22 0;
#X connect 25 0 23 0;
#X connect 26 0 33 1;
#X connect 27 0 26 0;
#X connect 27 0 34 0;
#X connect 28 0 33 0;
#X connect 29 0 20 0;
#X connect 30 0 20 0;
#X connect 31 0 33 0;
#X connect 32 0 35 0;
#X connect 33 0 12 0;
#X connect 33 1 19 0;
#X connect 34 0 32 0;
#X connect 35 0 10 0;
#X connect 35 0 11 0;
#X restore 40 122 pd kinect;
#X obj 40 189 tgl 15 0 /distance/poll /distance/poll activate 17 7
0 10 -262144 -1 -1 1 1;
#X text 19 13 display distance in depth image;
#X text 21 29 with mouse pointer;
#X text 218 236 2011 Matthias Kronlachner;
#X obj 36 156 loadbang;
#X connect 2 0 0 0;
#X connect 4 0 0 0;
#X connect 10 0 6 0;
